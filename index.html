<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>Ù…Ø­Ø§ÙƒÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù‚Ø¯Ø±Ø§Øª</title>
<style>
  * { box-sizing: border-box; }
  body {
    margin: 0;
    padding: 0;
    font-family: Tahoma, Arial, sans-serif;
    background: #f7f7f7;
  }

  header, footer {
    width: 100%;
    padding: 10px 20px;
    color: #fff;
    background: #0d47a1;
    font-weight: bold;
    position: fixed;
    left: 0;
    z-index: 10;
  }
  header { top: 0; text-align: center; }
  footer {
    bottom: 0;
    display: flex;
    justify-content: center;
    font-size: 14px;
  }

  /* Ø£Ø²Ø±Ø§Ø± ØªÙƒØ¨ÙŠØ±/ØªØµØºÙŠØ± Ø§Ù„Ø®Ø· */
  #fontControls {
    position: fixed;
    top: 8px;
    left: 20px;
    z-index: 11;
    display: flex;
    gap: 6px;
  }
  #fontControls button {
    padding: 4px 8px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    background: #fff;
    color: #0d47a1;
    font-weight: bold;
  }

  .container {
    margin-top: 60px;
    margin-bottom: 40px;
    height: calc(100vh - 100px);
    display: none; /* ØªØ¸Ù‡Ø± Ø¨Ø¹Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙˆÙ„ */
  }

  .left-panel {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
  }

  .right-panel {
    width: 28%;
    border-right: 3px solid #0d47a1;
    background: #e3f2fd;
    padding: 10px;
    overflow-y: auto;
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
  }

  .question-box {
    background: #e3f2fd;
    padding: 20px;
    border-radius: 10px;
    border: 2px solid #0d47a1;
  }

  #sectionLabel {
    font-size: 20px;
    font-weight: bold;
    color: #0d47a1;
    text-align: center;
    margin-bottom: 5px;
  }

  #timerBox {
    font-size: 20px;
    font-weight: bold;
    color: #0d47a1;
    text-align: center;
    margin-bottom: 15px;
  }

  .q-btn {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    background: #ef9a9a; /* Ø§ÙØªØ±Ø§Ø¶ÙŠ = ØºÙŠØ± Ù…Ø­Ù„ÙˆÙ„ */
    cursor: pointer;
    border: 1px solid #0d47a1;
    margin: 4px;
    font-weight: bold;
  }
  .q-btn.answered { background: #a5d6a7; }
  .q-btn.marked   { border: 3px solid #ffeb3b; }

  .options label {
    display: block;
    margin: 8px 0;
    font-size: 18px;
    cursor: pointer;
  }

  .actions {
    display: flex;
    gap: 8px;
    margin-top: 20px;
    flex-wrap: wrap;
  }

  .actions button,
  .overlay button {
    padding: 8px 16px;
    font-size: 15px;
    cursor: pointer;
    border: none;
    border-radius: 6px;
    background: #0d47a1;
    color: #fff;
  }

  .overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: #ffffff;
    display: none;
    z-index: 20;
    text-align: center;
    /* Ø¨Ø¯Ù„ padding-top Ø¨Ø®Ø§ØµÙŠØ© Ù…Ø±ÙƒØ²ÙŠØ© */
    display: none;
    align-items: center;
    justify-content: center;
  }

  .overlay-content {
    max-width: 700px;
    margin: 0 auto;
    background: #e3f2fd;
    padding: 30px;
    border-radius: 16px;
    border: 2px solid #0d47a1;
    text-align: right;
  }

  .overlay h2 {
    text-align: center;
    margin-bottom: 15px;
  }

  .end-screen h2 {
    margin-bottom: 10px;
  }
</style>
</head>
<body>

<header>Ù‚ÙŠØ§Ø³</header>

<div id="fontControls">
  <button onclick="setFontSize(14)">Aâˆ’</button>
  <button onclick="setFontSize(16)">A</button>
  <button onclick="setFontSize(20)">A+</button>
</div>

<footer>
  Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø·Ø§Ù„Ø¨: ØªØ±ÙƒÙŠ Ø³Ù‡Ù„ ØµØ¨Ø­ÙŠ ÙˆØ§ÙƒØ¯ â€” Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø¸Ù‡Ø±Ø§Ù† Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠØ©
</footer>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø£ÙˆÙ„Ù‰ -->
<div id="instructionsScreen" class="overlay" style="display:flex;align-items:flex-start;justify-content:center;">
  <div class="overlay-content">
    <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø§Ù„Ø·Ø§Ù„Ø¨: ØªØ±ÙƒÙŠ Ø³Ù‡Ù„ ØµØ¨Ø­ÙŠ ÙˆØ§ÙƒØ¯</h2>
    <p>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù‚Ø±Ø§Ø¡Ø© ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø¹Ù†Ø§ÙŠØ©:</p>
    <ol>
      <li>Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ <strong>120 Ø³Ø¤Ø§Ù„Ø§Ù‹</strong> Ù…ÙˆØ²Ø¹Ø© Ø¹Ù„Ù‰ Ø¹Ø¯Ø© Ø£Ù‚Ø³Ø§Ù….</li>
      <li>Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø°ÙŠ Ø£Ù†Ù‡ÙŠØªÙ‡.</li>
      <li>Ù…Ø¯Ø© ÙƒÙ„ Ù‚Ø³Ù… <strong>25 Ø¯Ù‚ÙŠÙ‚Ø©</strong> ÙÙ‚Ø·.</li>
    </ol>
    <div style="text-align:center;margin-top:15px;">
      <button onclick="startAfterInstructions()">Ø§Ø¨Ø¯Ø£</button>
    </div>
  </div>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
<div id="sectionScreen" class="overlay">
  <div>
    <p id="sectionMessage" style="font-size:22px;margin-bottom:10px;">Ø³ÙŠØªÙ… Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙˆÙ„.</p>
    <p id="autoNextTimer">Ø³ÙŠØªÙ… Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø®Ù„Ø§Ù„ 5 Ø«ÙˆØ§Ù†Ù...</p>
    <button onclick="skipSectionIntro()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†</button>
  </div>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
<div id="quizContainer" class="container">
  <div class="left-panel">
    <div id="sectionLabel">Ø§Ù„Ù‚Ø³Ù… Ø±Ù‚Ù… 1</div>
    <div id="timerBox">Ø§Ù„ÙˆÙ‚Øª: 25:00</div>
    <div class="question-box">
      <h2 id="qTitle">Ø§Ù„Ø³Ø¤Ø§Ù„</h2>
      <p id="qText">Ø³ÙŠØ¸Ù‡Ø± Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù‡Ù†Ø§...</p>
      <div id="options"></div>
      <div class="actions">
        <button onclick="markQuestion()">ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø©</button>
        <button onclick="prevQuestion()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        <button onclick="nextQuestion()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
        <button onclick="confirmFinishSection()">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù‚Ø³Ù…</button>
      </div>
    </div>
  </div>
  <div class="right-panel" id="questionNav"></div>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ© -->
<div id="endScreen" class="overlay end-screen">
  <div>
    <h2>ğŸŒŸ Ø§Ù†ØªÙ‡ÙŠØª Ù…Ù† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ğŸŒŸ</h2>
    <div style="background:#e3f2fd; padding:30px; width:60%; margin:auto; border-radius:20px; border:3px solid #0d47a1;">
      <p style="font-size:22px;">Ù†Ø³Ø¨Ø© Ø¥Ù†Ø¬Ø§Ø²Ùƒ:</p>
      <p id="finalScoreText" style="font-size:42px; font-weight:bold; color:#1b5e20;"></p>
    </div>
  </div>
</div>

<script>
  const TOTAL_QUESTIONS = 120;
  const SECTION_SIZE = 24;
  const SECTION_TIME = 25 * 60; // 25 Ø¯Ù‚ÙŠÙ‚Ø©

  const questions = Array.from({length: TOTAL_QUESTIONS}, (_, i) => ({
    q: `Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… ${i+1}`,
    options: ["Ø£", "Ø¨", "Ø¬", "Ø¯"],
    answer: null,
    marked: false
  }));

  let currentSection = 0; // 0..4
  let currentIndex = 0;
  let sectionCountdown = 5;
  let sectionInterval = null;

  let timeLeft = SECTION_TIME;
  let timerInterval = null;

  const instructionsScreen = document.getElementById('instructionsScreen');
  const sectionScreen = document.getElementById('sectionScreen');
  const quizContainer = document.getElementById('quizContainer');
  const endScreen = document.getElementById('endScreen');
  const questionNav = document.getElementById('questionNav');
  const timerBox = document.getElementById('timerBox');
  const sectionLabel = document.getElementById('sectionLabel');

  function setFontSize(px){
    document.body.style.fontSize = px + 'px';
  }

  // Ø´Ø§Ø´Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª -> Ø¨Ø¹Ø¯Ù‡Ø§ Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙˆÙ„
  function startAfterInstructions(){
    instructionsScreen.style.display = 'none';
    showSectionIntro(true);
  }

  function showSectionIntro(isFirst=false){
    sectionScreen.style.display = 'flex'; // Ø­ØªÙ‰ ØªØ¹Ù…Ù„ Ø®ØµØ§Ø¦Øµ flex ÙÙŠ CSS
    const msg = document.getElementById('sectionMessage');
    if(isFirst){
      msg.textContent = 'Ø³ØªØ¨Ø¯Ø£ Ø§Ù„Ø¢Ù† Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù‚Ø³Ù… Ø±Ù‚Ù… 1.';
    }else{
      // Ù‡Ù†Ø§ Ø§Ù„Ù†Øµ Ø§Ù„Ù„ÙŠ Ø·Ù„Ø¨ØªÙ‡ Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
      msg.textContent = 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø³Ù… Ø±Ù‚Ù… ' + (currentSection + 1) + 'ØŸ';
    }

    sectionCountdown = 5;
    document.getElementById('autoNextTimer').textContent =
      `Ø³ÙŠØªÙ… Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø®Ù„Ø§Ù„ ${sectionCountdown} Ø«ÙˆØ§Ù†Ù...`;

    clearInterval(sectionInterval);
    sectionInterval = setInterval(()=>{
      sectionCountdown--;
      document.getElementById('autoNextTimer').textContent =
        `Ø³ÙŠØªÙ… Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø®Ù„Ø§Ù„ ${sectionCountdown} Ø«ÙˆØ§Ù†Ù...`;
      if(sectionCountdown <= 0){
        skipSectionIntro();
      }
    },1000);
  }

  function skipSectionIntro(){
    clearInterval(sectionInterval);
    startSection();
  }

  function startSection(){
    sectionScreen.style.display = 'none';
    quizContainer.style.display = 'flex';
    // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø§Ù„Ù‚Ø³Ù… ÙÙŠ ÙƒÙ„ Ù…Ø±Ø© Ù†Ø¯Ø®Ù„ Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯
    sectionLabel.textContent = 'Ø§Ù„Ù‚Ø³Ù… Ø±Ù‚Ù… ' + (currentSection + 1);
    startTimer();
    buildNav();
    loadQuestion(currentSection * SECTION_SIZE);
  }

  function startTimer(){
    clearInterval(timerInterval);
    timeLeft = SECTION_TIME;
    updateTimer();
    timerInterval = setInterval(()=>{
      timeLeft--;
      updateTimer();
      if(timeLeft <= 0){
        // Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø³Ù…
        confirmFinishSection(true); // true = Ù…Ù† Ø§Ù„ØªØ§ÙŠÙ…Ø±
      }
    },1000);
  }

  function updateTimer(){
    const m = Math.floor(timeLeft / 60);
    const s = timeLeft % 60;
    timerBox.textContent = `Ø§Ù„ÙˆÙ‚Øª: ${m}:${s.toString().padStart(2,'0')}`;
  }

  function buildNav(){
    questionNav.innerHTML = '';
    const start = currentSection * SECTION_SIZE;
    const end = Math.min(start + SECTION_SIZE, TOTAL_QUESTIONS);
    for(let i = start; i < end; i++){
      const btn = document.createElement('div');
      btn.className = 'q-btn ' + (questions[i].answer ? 'answered' : 'unanswered');
      btn.id = 'qbtn-' + i;
      btn.textContent = i + 1;
      btn.onclick = ()=> loadQuestion(i);
      questionNav.appendChild(btn);
    }
  }

  function loadQuestion(i){
    currentIndex = i;
    const q = questions[i];
    document.getElementById('qTitle').textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… ${i+1}`;
    document.getElementById('qText').textContent = q.q;

    const opts = document.getElementById('options');
    opts.innerHTML = '';
    q.options.forEach((op, idx)=>{
      const label = document.createElement('label');
      const radio = document.createElement('input');
      radio.type = 'radio';
      radio.name = 'q' + i;
      radio.value = op;
      if(q.answer === op) radio.checked = true;
      radio.onclick = ()=> {
        q.answer = op;
        updateBtnStatus(i);
      };
      label.appendChild(radio);
      label.appendChild(document.createTextNode(' ' + op));
      opts.appendChild(label);
    });
  }

  function updateBtnStatus(i){
    const btn = document.getElementById('qbtn-' + i);
    if(!btn) return;
    btn.className = 'q-btn';
    if(questions[i].answer) btn.classList.add('answered');
    else btn.classList.add('unanswered');
    if(questions[i].marked) btn.classList.add('marked');
  }

  function markQuestion(){
    questions[currentIndex].marked = !questions[currentIndex].marked;
    updateBtnStatus(currentIndex);
  }

  function nextQuestion(){
    const end = Math.min((currentSection+1)*SECTION_SIZE, TOTAL_QUESTIONS);
    if(currentIndex + 1 < end){
      loadQuestion(currentIndex + 1);
    }
  }

  function prevQuestion(){
    const start = currentSection * SECTION_SIZE;
    if(currentIndex - 1 >= start){
      loadQuestion(currentIndex - 1);
    }
  }

  function confirmFinishSection(fromTimer=false){
    const start = currentSection * SECTION_SIZE;
    const end = Math.min(start + SECTION_SIZE, TOTAL_QUESTIONS);
    let allAnswered = true;
    for(let i=start;i<end;i++){
      if(!questions[i].answer){
        allAnswered = false;
        break;
      }
    }
    if(!allAnswered && !fromTimer){
      alert('ÙŠØ¬Ø¨ Ø­Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„.');
      return;
    }

    if(fromTimer){
      finishSection();
    } else {
      // Ù†Ø¨Ø¯Ø£ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ (Ù…Ø¹ ØµÙØ­Ø© "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯...")
      finishSection();
    }
  }

  function finishSection(){
    clearInterval(timerInterval);
    currentSection++;
    if(currentSection * SECTION_SIZE >= TOTAL_QUESTIONS){
      finishExam();
    }else{
      showSectionIntro(false);
    }
  }

  function finishExam(){
    clearInterval(timerInterval);
    quizContainer.style.display = 'none';
    timerBox.style.display = 'none';
    sectionScreen.style.display = 'none';
    endScreen.style.display = 'flex';

    const answered = questions.filter(q=> q.answer !== null).length;
    const score = Math.round((answered / TOTAL_QUESTIONS) * 100);
    document.getElementById('finalScoreText').textContent = `${score} / 100`;
  }

  // Ø£ÙˆÙ„ Ù…Ø§ ØªÙØªØ­ Ø§Ù„ØµÙØ­Ø©: ØªØ¹Ù„ÙŠÙ…Ø§Øª
  instructionsScreen.style.display = 'flex';
</script>
</body>
</html>










